<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#0ea5e9" />
  <meta name="description" content="Track your co-op job applications efficiently" />
  <link rel="icon" href="favicon.ico" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <link rel="manifest" href="manifest.json" />
  <title>Co-op Application Tracker</title>
  
  <!-- Load React, ReactDOM, and other dependencies via CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.22.5/babel.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.min.js"></script>
  
  <style>
    /* Custom styles that may be needed beyond Tailwind */
    body {
      min-height: 100vh;
      background: linear-gradient(to bottom right, #0f172a, #1e293b);
      color: #f1f5f9;
    }
    
    /* For smooth transitions */
    .transition-colors {
      transition: background-color 0.3s, color 0.3s, border-color 0.3s;
    }
    
    .transition-all {
      transition: all 0.3s;
    }
    
    /* Custom scrollbar for the modal */
    .custom-scrollbar::-webkit-scrollbar {
      width: 8px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-track {
      background: #334155;
      border-radius: 8px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb {
      background: #64748b;
      border-radius: 8px;
    }
    
    .custom-scrollbar::-webkit-scrollbar-thumb:hover {
      background: #94a3b8;
    }
    
    /* Gradient text effect */
    .text-gradient {
      background: linear-gradient(to right, #38bdf8, #0ea5e9);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
  </style>
</head>
<body>
  <noscript>You need to enable JavaScript to run this app.</noscript>
  <div id="root"></div>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./sw.js')
          .then(registration => {
            console.log('ServiceWorker registration successful with scope: ', registration.scope);
          })
          .catch(error => {
            console.log('ServiceWorker registration failed: ', error);
          });
      });
    }
  </script>

  <!-- App Code (Babel will transform this) -->
  <script type="text/babel">
    // Import necessary Lucide icons
    const { Plus, Edit2, Trash2, Eye, X, Briefcase, Calendar, Link2, Mail, FileText, 
            CheckCircle, XCircle, Clock, TrendingUp, Award, DollarSign, AlertTriangle, 
            Info, Filter, Search, ChevronDown, ChevronUp } = lucide;
    
    // Constants for status options and their corresponding icons and colors
    const STATUS_OPTIONS = [
      { value: 'Wishlist', label: 'Wishlist / To Apply', icon: <Info size={16} />, color: 'bg-gray-500' },
      { value: 'Applied', label: 'Applied', icon: <CheckCircle size={16} />, color: 'bg-blue-500' },
      { value: 'Assessment', label: 'Assessment', icon: <FileText size={16} />, color: 'bg-indigo-500' },
      { value: 'Interview Scheduled', label: 'Interview Scheduled', icon: <Calendar size={16} />, color: 'bg-purple-500' },
      { value: 'Interviewed', label: 'Interviewed', icon: <Clock size={16} />, color: 'bg-pink-500' },
      { value: 'Offer Extended', label: 'Offer Extended', icon: <Award size={16} />, color: 'bg-green-500' },
      { value: 'Offer Accepted', label: 'Offer Accepted', icon: <DollarSign size={16} />, color: 'bg-teal-500' },
      { value: 'Offer Declined', label: 'Offer Declined', icon: <XCircle size={16} />, color: 'bg-yellow-600' },
      { value: 'Rejected', label: 'Rejected', icon: <XCircle size={16} />, color: 'bg-red-500' },
      { value: 'Withdrawn', label: 'Withdrawn', icon: <AlertTriangle size={16} />, color: 'bg-orange-500' },
    ];

    // Helper function to get status details
    const getStatusDetails = (statusValue) => {
      return STATUS_OPTIONS.find(s => s.value === statusValue) || { label: statusValue, icon: <Info size={16} />, color: 'bg-gray-400' };
    };

    // Main Application Component
    function App() {
      const { useState, useEffect, useCallback } = React;
      
      // State for applications, initialized from local storage or an empty array
      const [applications, setApplications] = useState(() => {
        const savedApps = localStorage.getItem('jobApplications');
        return savedApps ? JSON.parse(savedApps) : [];
      });

      // State for managing the modal (form visibility and current application being edited/viewed)
      const [isModalOpen, setIsModalOpen] = useState(false);
      const [currentApplication, setCurrentApplication] = useState(null); // For editing
      const [viewApplication, setViewApplication] = useState(null); // For viewing details

      // State for search term and filters
      const [searchTerm, setSearchTerm] = useState('');
      const [statusFilter, setStatusFilter] = useState('');
      const [sortConfig, setSortConfig] = useState({ key: 'dateApplied', direction: 'descending' });

      // Effect to save applications to local storage whenever they change
      useEffect(() => {
        localStorage.setItem('jobApplications', JSON.stringify(applications));
      }, [applications]);

      // Function to open the modal for adding a new application
      const handleAddNew = () => {
        setCurrentApplication(null); // Ensure no existing data is in the form
        setViewApplication(null);
        setIsModalOpen(true);
      };

      // Function to open the modal for editing an existing application
      const handleEdit = (app) => {
        setCurrentApplication(app);
        setViewApplication(null);
        setIsModalOpen(true);
      };

      // Function to open the modal for viewing an existing application's details
      const handleViewDetails = (app) => {
        setViewApplication(app);
        setCurrentApplication(null);
        setIsModalOpen(true);
      };

      // Function to close the modal
      const handleCloseModal = () => {
        setIsModalOpen(false);
        setCurrentApplication(null);
        setViewApplication(null);
      };

      // Function to save an application (either new or edited)
      const handleSaveApplication = (appData) => {
        if (currentApplication && currentApplication.id) {
          // Editing existing application
          setApplications(prevApps =>
            prevApps.map(app => (app.id === currentApplication.id ? { ...app, ...appData } : app))
          );
        } else {
          // Adding new application
          setApplications(prevApps => [
            ...prevApps,
            { ...appData, id: Date.now() + Math.random().toString(36).substring(2, 9) }, // More robust ID
          ]);
        }
        handleCloseModal();
      };

      // Function to delete an application
      const handleDelete = (appId) => {
        if (window.confirm('Are you sure you want to delete this application?')) {
          setApplications(prevApps => prevApps.filter(app => app.id !== appId));
        }
      };

      // Export data function
      const exportData = () => {
        const dataStr = JSON.stringify(applications);
        const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
        const exportFileDefaultName = 'coop-applications.json';
        
        const linkElement = document.createElement('a');
        linkElement.setAttribute('href', dataUri);
        linkElement.setAttribute('download', exportFileDefaultName);
        linkElement.click();
      };

      // Import data function
      const importData = (event) => {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => {
            try {
              const importedData = JSON.parse(e.target.result);
              if (Array.isArray(importedData)) {
                setApplications(importedData);
              }
            } catch (error) {
              alert('Invalid JSON file');
            }
          };
          reader.readAsText(file);
        }
      };

      // Filter and sort applications
      const filteredAndSortedApplications = useCallback(() => {
        let apps = [...applications];

        // Filter by search term (company or role)
        if (searchTerm) {
          apps = apps.filter(app =>
            app.companyName.toLowerCase().includes(searchTerm.toLowerCase()) ||
            app.role.toLowerCase().includes(searchTerm.toLowerCase())
          );
        }

        // Filter by status
        if (statusFilter) {
          apps = apps.filter(app => app.status === statusFilter);
        }

        // Sort applications
        apps.sort((a, b) => {
          let valA = a[sortConfig.key];
          let valB = b[sortConfig.key];

          // Handle date sorting correctly
          if (sortConfig.key === 'dateApplied') {
            valA = new Date(valA);
            valB = new Date(valB);
          } else if (typeof valA === 'string') {
            valA = valA.toLowerCase();
            valB = valB.toLowerCase();
          }
          
          if (valA < valB) {
            return sortConfig.direction === 'ascending' ? -1 : 1;
          }
          if (valA > valB) {
            return sortConfig.direction === 'ascending' ? 1 : -1;
          }
          return 0;
        });

        return apps;
      }, [applications, searchTerm, statusFilter, sortConfig]);


      const requestSort = (key) => {
        let direction = 'ascending';
        if (sortConfig.key === key && sortConfig.direction === 'ascending') {
          direction = 'descending';
        }
        setSortConfig({ key, direction });
      };

      const getSortIndicator = (key) => {
        if (sortConfig.key === key) {
          return sortConfig.direction === 'ascending' ? <ChevronUp size={16} className="inline ml-1" /> : <ChevronDown size={16} className="inline ml-1" />;
        }
        return null;
      };


      // Render the UI
      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 to-slate-800 text-gray-100 p-4 sm:p-6 md:p-8 font-sans">
          <header className="mb-8 text-center">
            <h1 className="text-4xl sm:text-5xl font-bold text-gradient">
              Co-op Application Tracker
            </h1>
            <p className="text-slate-400 mt-2 text-lg">Manage your job applications efficiently.</p>
          </header>

          {/* Controls: Add New, Search, Filter, Import/Export */}
          <div className="mb-6 flex flex-col sm:flex-row justify-between items-center gap-4 p-4 bg-slate-800/50 backdrop-blur-md rounded-xl shadow-2xl">
            <div className="flex flex-wrap gap-2 w-full sm:w-auto">
              <button
                onClick={handleAddNew}
                className="flex items-center gap-2 bg-sky-500 hover:bg-sky-600 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all w-full sm:w-auto"
              >
                <Plus size={20} /> Add New Application
              </button>
              <div className="flex gap-2">
                <button
                  onClick={exportData}
                  className="flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white font-semibold py-3 px-4 rounded-lg shadow-lg transition-colors"
                >
                  Export Data
                </button>
                <label className="flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold py-3 px-4 rounded-lg shadow-lg transition-colors cursor-pointer">
                  Import Data
                  <input 
                    type="file" 
                    accept=".json" 
                    onChange={importData} 
                    className="hidden"
                  />
                </label>
              </div>
            </div>
            <div className="flex flex-col sm:flex-row gap-4 w-full sm:w-auto">
              <div className="relative w-full sm:w-auto">
                <input
                  type="text"
                  placeholder="Search Company or Role..."
                  value={searchTerm}
                  onChange={(e) => setSearchTerm(e.target.value)}
                  className="bg-slate-700 text-gray-200 placeholder-slate-400 border border-slate-600 rounded-lg py-3 px-4 pl-10 focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none transition-colors w-full"
                />
                <Search size={18} className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400" />
              </div>
              <div className="relative w-full sm:w-auto">
                <select
                  value={statusFilter}
                  onChange={(e) => setStatusFilter(e.target.value)}
                  className="bg-slate-700 text-gray-200 border border-slate-600 rounded-lg py-3 px-4 pl-10 focus:ring-2 focus:ring-sky-500 focus:border-sky-500 outline-none appearance-none w-full"
                >
                  <option value="">All Statuses</option>
                  {STATUS_OPTIONS.map(status => (
                    <option key={status.value} value={status.value}>{status.label}</option>
                  ))}
                </select>
                <Filter size={18} className="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none" />
                <ChevronDown size={18} className="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none" />
              </div>
            </div>
          </div>

          {/* Application List */}
          {applications.length === 0 && !searchTerm && !statusFilter ? (
            <div className="text-center text-slate-400 py-10 bg-slate-800/30 rounded-lg shadow-xl">
              <Briefcase size={48} className="mx-auto mb-4 text-slate-500" />
              <h2 className="text-2xl font-semibold mb-2">No Applications Yet!</h2>
              <p>Click "Add New Application" to get started.</p>
            </div>
          ) : filteredAndSortedApplications().length === 0 ? (
            <div className="text-center text-slate-400 py-10 bg-slate-800/30 rounded-lg shadow-xl">
              <Search size={48} className="mx-auto mb-4 text-slate-500" />
              <h2 className="text-2xl font-semibold mb-2">No Applications Found</h2>
              <p>Try adjusting your search or filter criteria.</p>
            </div>
          ) : (
            <div className="overflow-x-auto bg-slate-800/50 backdrop-blur-md shadow-2xl rounded-xl">
              <table className="min-w-full divide-y divide-slate-700">
                <thead className="bg-slate-700/50">
                  <tr>
                    <th scope="col" className="px-6 py-4 text-left text-xs font-medium text-sky-300 uppercase tracking-wider cursor-pointer" onClick={() => requestSort('companyName')}>Company {getSortIndicator('companyName')}</th>
                    <th scope="col" className="px-6 py-4 text-left text-xs font-medium text-sky-300 uppercase tracking-wider cursor-pointer" onClick={() => requestSort('role')}>Role {getSortIndicator('role')}</th>
                    <th scope="col" className="px-6 py-4 text-left text-xs font-medium text-sky-300 uppercase tracking-wider cursor-pointer" onClick={() => requestSort('dateApplied')}>Date Applied {getSortIndicator('dateApplied')}</th>
                    <th scope="col" className="px-6 py-4 text-left text-xs font-medium text-sky-300 uppercase tracking-wider cursor-pointer" onClick={() => requestSort('status')}>Status {getSortIndicator('status')}</th>
                    <th scope="col" className="px-6 py-4 text-left text-xs font-medium text-sky-300 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-slate-700">
                  {filteredAndSortedApplications().map(app => (
                    <ApplicationItem
                      key={app.id}
                      application={app}
                      onEdit={() => handleEdit(app)}
                      onDelete={() => handleDelete(app.id)}
                      onViewDetails={() => handleViewDetails(app)}
                    />
                  ))}
                </tbody>
              </table>
            </div>
          )}

          {/* Modal for Add/Edit/View */}
          {(isModalOpen && (currentApplication || !currentApplication && !viewApplication || viewApplication)) && (
            <Modal onClose={handleCloseModal}>
              {viewApplication ? (
                <ViewApplicationDetails application={viewApplication} onClose={handleCloseModal} />
              ) : (
                <ApplicationForm
                  onSave={handleSaveApplication}
                  onClose={handleCloseModal}
                  application={currentApplication}
                />
              )}
            </Modal>
          )}
          <footer className="text-center mt-12 text-slate-500 text-sm">
            <p>&copy; {new Date().getFullYear()} Grad Student Co-op Tracker. Keep Pushing!</p>
          </footer>
        </div>
      );
    }

    // Component for a single application item in the list
    function ApplicationItem({ application, onEdit, onDelete, onViewDetails }) {
      const { companyName, role, dateApplied, status } = application;
      const statusDetails = getStatusDetails(status);

      return (
        <tr className="hover:bg-slate-700/30 transition-colors duration-150">
          <td className="px-6 py-4 whitespace-nowrap">
            <div className="text-sm font-medium text-gray-100">{companyName}</div>
          </td>
          <td className="px-6 py-4 whitespace-nowrap">
            <div className="text-sm text-slate-300">{role}</div>
          </td>
          <td className="px-6 py-4 whitespace-nowrap">
            <div className="text-sm text-slate-300">{new Date(dateApplied).toLocaleDateString()}</div>
          </td>
          <td className="px-6 py-4 whitespace-nowrap">
            <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${statusDetails.color} text-white items-center gap-1.5`}>
              {statusDetails.icon}
              {statusDetails.label}
            </span>
          </td>
          <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
            <div className="flex items-center gap-2">
              <button onClick={onViewDetails} className="text-sky-400 hover:text-sky-300 transition-colors p-1.5 rounded-md hover:bg-sky-500/20" title="View Details">
                <Eye size={18} />
              </button>
              <button onClick={onEdit} className="text-yellow-400 hover:text-yellow-300 transition-colors p-1.5 rounded-md hover:bg-yellow-500/20" title="Edit">
                <Edit2 size={18} />
              </button>
              <button onClick={onDelete} className="text-red-400 hover:text-red-300 transition-colors p-1.5 rounded-md hover:bg-red-500/20" title="Delete">
                <Trash2 size={18} />
              </button>
            </div>
          </td>
        </tr>
      );
    }


    // Component for the application form (used in the modal)
    function ApplicationForm({ onSave, onClose, application }) {
      const { useState } = React;
      
      const [formData, setFormData] = useState({
        companyName: application?.companyName || '',
        role: application?.role || '',
        dateApplied: application?.dateApplied || new Date().toISOString().split('T')[0],
        status: application?.status || 'Applied',
        resumeVersion: application?.resumeVersion || '',
        emailId: application?.emailId || '',
        applicationLink: application?.applicationLink || '',
        notes: application?.notes || '',
      });

      const handleChange = (e) => {
        const { name, value } = e.target;
        setFormData(prev => ({ ...prev, [name]: value }));
      };

      const handleSubmit = (e) => {
        e.preventDefault();
        if (!formData.companyName || !formData.role || !formData.dateApplied) {
          alert("Company Name, Role, and Date Applied are required.");
          return;
        }
        onSave(formData);
      };
      
      const inputClass = "mt-1 block w-full bg-slate-700 border border-slate-600 rounded-md shadow-sm py-2 px-3 text-gray-200 focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm transition-colors";
      const labelClass = "block text-sm font-medium text-slate-300";

      return (
        <form onSubmit={handleSubmit} className="space-y-6 p-1">
          <h2 className="text-2xl font-semibold text-sky-400 mb-6 text-center">
            {application ? 'Edit Application' : 'Add New Application'}
          </h2>
          
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label htmlFor="companyName" className={labelClass}>Company Name <span className="text-red-400">*</span></label>
              <input type="text" name="companyName" id="companyName" value={formData.companyName} onChange={handleChange} className={inputClass} required />
            </div>
            <div>
              <label htmlFor="role" className={labelClass}>Role / Position <span className="text-red-400">*</span></label>
              <input type="text" name="role" id="role" value={formData.role} onChange={handleChange} className={inputClass} required />
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label htmlFor="dateApplied" className={labelClass}>Date Applied <span className="text-red-400">*</span></label>
              <input type="date" name="dateApplied" id="dateApplied" value={formData.dateApplied} onChange={handleChange} className={inputClass} required />
            </div>
            <div>
              <label htmlFor="status" className={labelClass}>Status</label>
              <select name="status" id="status" value={formData.status} onChange={handleChange} className={inputClass}>
                {STATUS_OPTIONS.map(option => (
                  <option key={option.value} value={option.value}>{option.label}</option>
                ))}
              </select>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div>
              <label htmlFor="resumeVersion" className={labelClass}>Resume Version</label>
              <input type="text" name="resumeVersion" id="resumeVersion" value={formData.resumeVersion} onChange={handleChange} className={inputClass} placeholder="e.g., v2.1_coop" />
            </div>
            <div>
              <label htmlFor="emailId" className={labelClass}>Email ID Used</label>
              <input type="email" name="emailId" id="emailId" value={formData.emailId} onChange={handleChange} className={inputClass} placeholder="your.email@example.com" />
            </div>
          </div>
          
          <div>
            <label htmlFor="applicationLink" className={labelClass}>Application Link / Portal</label>
            <input type="url" name="applicationLink" id="applicationLink" value={formData.applicationLink} onChange={handleChange} className={inputClass} placeholder="https://careers.example.com/job/123" />
          </div>
          <div>
            <label htmlFor="notes" className={labelClass}>Notes</label>
            <textarea name="notes" id="notes" value={formData.notes} onChange={handleChange} rows="4" className={inputClass} placeholder="e.g., Contact person, specific requirements, interview prep points..."></textarea>
          </div>
          <div className="flex justify-end gap-4 pt-4">
            <button type="button" onClick={onClose} className="px-6 py-2.5 rounded-lg text-slate-300 bg-slate-600 hover:bg-slate-500 transition-colors font-medium">
              Cancel
            </button>
            <button type="submit" className="px-6 py-2.5 rounded-lg text-white bg-sky-500 hover:bg-sky-600 transition-colors font-medium shadow-md hover:shadow-lg">
              {application ? 'Save Changes' : 'Add Application'}
            </button>
          </div>
        </form>
      );
    }

    // Component to view application details in a modal
    function ViewApplicationDetails({ application, onClose }) {
      const statusDetails = getStatusDetails(application.status);
      const detailItemClass = "py-3 sm:grid sm:grid-cols-3 sm:gap-4";
      const detailLabelClass = "text-sm font-medium text-slate-400";
      const detailValueClass = "mt-1 text-sm text-gray-100 sm:mt-0 sm:col-span-2";

      return (
        <div className="p-1">
          <div className="flex justify-between items-center mb-6">
            <h2 className="text-2xl font-semibold text-sky-400">Application Details</h2>
            <button onClick={onClose} className="text-slate-400 hover:text-slate-200 transition-colors">
              <X size={28} />
            </button>
          </div>
          
          <dl className="space-y-3">
            <div className={detailItemClass}>
              <dt className={detailLabelClass}><Briefcase size={16} className="inline mr-2" />Company Name</dt>
              <dd className={detailValueClass}>{application.companyName}</dd>
            </div>
            <div className={detailItemClass}>
              <dt className={detailLabelClass}><TrendingUp size={16} className="inline mr-2" />Role / Position</dt>
              <dd className={detailValueClass}>{application.role}</dd>
            </div>
            <div className={detailItemClass}>
              <dt className={detailLabelClass}><Calendar size={16} className="inline mr-2" />Date Applied</dt>
              <dd className={detailValueClass}>{new Date(application.dateApplied).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}</dd>
            </div>
            <div className={detailItemClass}>
              <dt className={detailLabelClass}>Status</dt>
              <dd className={`${detailValueClass} flex items-center`}>
                <span className={`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${statusDetails.color} text-white items-center gap-1.5`}>
                  {statusDetails.icon}
                  {statusDetails.label}
                </span>
              </dd>
            </div>
            {application.resumeVersion && (
              <div className={detailItemClass}>
                <dt className={detailLabelClass}><FileText size={16} className="inline mr-2" />Resume Version</dt>
                <dd className={detailValueClass}>{application.resumeVersion}</dd>
              </div>
            )}
            {application.emailId && (
              <div className={detailItemClass}>
                <dt className={detailLabelClass}><Mail size={16} className="inline mr-2" />Email ID Used</dt>
                <dd className={detailValueClass}>{application.emailId}</dd>
              </div>
            )}
            {application.applicationLink && (
              <div className={detailItemClass}>
                <dt className={detailLabelClass}><Link2 size={16} className="inline mr-2" />Application Link</dt>
                <dd className={detailValueClass}>
                  <a href={application.applicationLink} target="_blank" rel="noopener noreferrer" className="text-sky-400 hover:text-sky-300 underline break-all">
                    {application.applicationLink}
                  </a>
                </dd>
              </div>
            )}
            {application.notes && (
              <div className={detailItemClass}>
                <dt className={detailLabelClass}><Info size={16} className="inline mr-2" />Notes</dt>
                <dd className={`${detailValueClass} whitespace-pre-wrap bg-slate-700/50 p-3 rounded-md`}>{application.notes}</dd>
              </div>
            )}
          </dl>
          <div className="mt-8 flex justify-end">
            <button type="button" onClick={onClose} className="px-6 py-2.5 rounded-lg text-slate-300 bg-slate-600 hover:bg-slate-500 transition-colors font-medium">
              Close
            </button>
          </div>
        </div>
      );
    }

    // Generic Modal Component
    function Modal({ children, onClose }) {
      // Handle Escape key press to close modal
      React.useEffect(() => {
        const handleEsc = (event) => {
          if (event.key === 'Escape') {
            onClose();
          }
        };
        window.addEventListener('keydown', handleEsc);
        return () => {
          window.removeEventListener('keydown', handleEsc);
        };
      }, [onClose]);

      return (
        <div 
          className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 z-50 transition-opacity duration-300 ease-in-out"
          onClick={onClose} // Close modal on overlay click
        >
          <div 
            className="bg-slate-800 p-6 sm:p-8 rounded-xl shadow-2xl w-full max-w-xl max-h-[90vh] overflow-y-auto relative border border-slate-700 custom-scrollbar"
            onClick={e => e.stopPropagation()} // Prevent click inside modal from closing it
          >
            <button 
              onClick={onClose} 
              className="absolute top-4 right-4 text-slate-400 hover:text-slate-200 transition-colors z-10"
              aria-label="Close modal"
            >
              <X size={28} />
            </button>
            {children}
          </div>
        </div>
      );
    }

    // Render the App to the DOM
    const rootElement = document.getElementById('root');
    const root = ReactDOM.createRoot(rootElement);
    root.render(<App />);
  </script>
</body>
</html>
